plank:
  job_url_template: 'https://gubernator-internal.googleplex.com/build/{{with .Spec.Refs}}{{if eq .Org "knative"}}knative-prow{{else}}gke-prow{{end}}{{else}}{{if eq (printf "%.10s" .Spec.Job) "ci-knative"}}knative-prow{{else}}gke-prow{{end}}{{end}}/{{if or (eq .Spec.Type "presubmit") (eq .Spec.Type "batch")}}pr-logs/pull{{with .Spec.Refs}}/{{.Org}}_{{.Repo}}{{end}}{{else}}logs{{end}}{{if eq .Spec.Type "presubmit"}}/{{with index .Spec.Refs.Pulls 0}}{{.Number}}{{end}}{{else if eq .Spec.Type "batch"}}/batch{{end}}/{{.Spec.Job}}/{{.Status.BuildID}}/'
  report_template: '[Full PR test history](https://gubernator-internal.googleplex.com/pr/{{if eq .Spec.Refs.Org "kubernetes"}}{{if eq .Spec.Refs.Repo "kubernetes"}}{{else}}{{.Spec.Refs.Repo}}/{{end}}{{else}}{{.Spec.Refs.Org}}_{{.Spec.Refs.Repo}}/{{end}}{{with index .Spec.Refs.Pulls 0}}{{.Number}}{{end}}). [Your PR dashboard](https://gubernator-internal.googleplex.com/pr/{{with index .Spec.Refs.Pulls 0}}{{.Author}}{{end}}).'
  pod_pending_timeout: 60m
  default_decoration_config:
    timeout: 7200000000000 # 2h
    grace_period: 15000000000 # 15s
    utility_images:
      clonerefs: "gcr.io/k8s-prow/clonerefs@sha256:b62ba1f379ac19c5ec9ee7bcab14d3f0b3c31cea9cdd4bc491e98e2c5f346c07"
      initupload: "gcr.io/k8s-prow/initupload@sha256:58f89f2aae68f7dc46aaf05c7e8204c4f26b53ec9ce30353d1c27ce44a60d121"
      entrypoint: "gcr.io/k8s-prow/entrypoint:v20180512-0255926d1"
      sidecar: "gcr.io/k8s-prow/sidecar@sha256:8807b2565f4d2699920542fcf890878824b1ede4198d7ff46bca53feb064ed44"
    gcs_configuration:
      bucket: "knative-prow"
      path_strategy: "explicit"
    gcs_credentials_secret: "service-account"

prowjob_namespace: default
pod_namespace: test-pods
log_level: info

tide:
  queries:
  - repos:
    - GoogleCloudPlatform/k8s-tpu-operator
    labels:
    - lgtm
    - approved
    missingLabels:
    - do-not-merge/hold
    - do-not-merge/work-in-progress
  merge_method:
    knative: squash
  target_url: https://prow-internal.gcpnode.com/tide.html

presets:
- labels:
    preset-service-account: "true"
  env:
  - name: GOOGLE_APPLICATION_CREDENTIALS
    value: /etc/service-account/service-account.json
  volumes:
  - name: service
    secret:
      secretName: service-account
  volumeMounts:
  - name: service
    mountPath: /etc/service-account
    readOnly: true
- labels:
    preset-k8s-ssh: "true"
  env:
  - name: USER
    value: prow
  - name: JENKINS_GCE_SSH_PRIVATE_KEY_FILE
    value: /etc/ssh-key-secret/ssh-private
  - name: JENKINS_GCE_SSH_PUBLIC_KEY_FILE
    value: /etc/ssh-key-secret/ssh-public
  volumes:
  - name: ssh
    secret:
      defaultMode: 0400
      secretName: ssh-key-secret
  volumeMounts:
  - name: ssh
    mountPath: /etc/ssh-key-secret
    readOnly: true
# storage / caching presets
- labels:
    preset-bazel-scratch-dir: "true"
  env:
  - name: TEST_TMPDIR
    value: /bazel-scratch/.cache/bazel
  volumes:
  - name: bazel-scratch
    emptyDir: {}
  volumeMounts:
  - name: bazel-scratch
    mountPath: /bazel-scratch/.cache
- labels:
    preset-bazel-remote-cache-enabled: "true"
  env:
  - name: BAZEL_REMOTE_CACHE_ENABLED
    value: "true"

presubmits:
  GoogleCloudPlatform/k8s-tpu-operator:
  - name: pull-k8s-tpu-operator-unit
    agent: kubernetes
    context: pull-k8s-tpu-operator-unit
    always_run: true
    rerun_command: /test pull-k8s-tpu-operator-unit
    trigger: (?m)^/test (all|pull-k8s-tpu-operator-unit),?(\s+|$)
    labels:
      preset-service-account: "true"
    spec:
      containers:
      - image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
        args:
        - --clean
        - --repo=github.com/GoogleCloudPlatform/$(REPO_NAME)=$(PULL_REFS)
        - --service-account=/etc/service-account/service-account.json
        - --upload=gs://gke-prow/pr-logs
        - --ssh=/etc/tpu-ssh/ssh-knative
        - --scenario=execute
        - -- # end bootstrap args, scenario args below
        - make
        - test
        env:
        - name: DOCKER_IN_DOCKER_ENABLED
          value: "true"
        # docker-in-docker needs privileged mode
        securityContext:
          privileged: true
        volumeMounts:
        - mountPath: /etc/tpu-ssh
          name: tpu-ssh
        - mountPath: /docker-graph
          name: docker-graph
      volumes:
      - name: tpu-ssh
        secret:
          defaultMode: 0400
          secretName: ssh-knative
      - name: docker-graph
        emptyDir: {}
  - name: pull-k8s-tpu-operator-verify
    agent: kubernetes
    context: pull-k8s-tpu-operator-verify
    always_run: true
    rerun_command: /test pull-k8s-tpu-operator-verify
    trigger: (?m)^/test (all|pull-k8s-tpu-operator-verify),?(\s+|$)
    labels:
      preset-service-account: "true"
    spec:
      containers:
      - image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
        args:
        - --clean
        - --repo=github.com/GoogleCloudPlatform/$(REPO_NAME)=$(PULL_REFS)
        - --service-account=/etc/service-account/service-account.json
        - --upload=gs://gke-prow/pr-logs
        - --ssh=/etc/tpu-ssh/ssh-knative
        - --scenario=execute
        - -- # end bootstrap args, scenario args below
        - make
        - verify
        env:
        - name: DOCKER_IN_DOCKER_ENABLED
          value: "true"
        # docker-in-docker needs privileged mode
        securityContext:
          privileged: true
        volumeMounts:
        - mountPath: /etc/tpu-ssh
          name: tpu-ssh
        - mountPath: /docker-graph
          name: docker-graph
      volumes:
      - name: tpu-ssh
        secret:
          defaultMode: 0400
          secretName: ssh-knative
      - name: docker-graph
        emptyDir: {}

  googleprivate/ml:
  - name: mlpipeline-build-image
    agent: kubernetes
    context: mlpipeline-build-image
    always_run: true
    skip_report: false
    rerun_command: /test mlpipeline-build-image
    trigger: (?m)^/test (all|mlpipeline-build-image),?(\s+|$)
    labels:
      preset-service-account: "true"
    spec:
      containers:
      - image: gcr.io/ml-pipeline/test-worker:v20180711-cb64c3d-e3b0c4
        args:
        - --clean
        - --repo=github.com/googleprivate/$(REPO_NAME)=$(PULL_REFS)
        - --service-account=/etc/service-account/service-account.json
        - --upload=gs://gke-prow/pr-logs
        - --ssh=/etc/ssh-knative/ssh-knative
        - --scenario=execute
        - -- # end bootstrap args, scenario args below
        - -- # end kubernetes_execute_bazel flags (consider following flags as text)
        - ./test/presubmit-tests.sh
        - "--workflow_file"
        - "build_image.yaml"
        volumeMounts:
        - mountPath: /etc/ssh-knative
          name: ssh-knative
      volumes:
      - name: ssh-knative
        secret:
          defaultMode: 0400
          secretName: ssh-knative
    run_after_success:
    - name: mlpipeline-presubmit-e2e-test
      agent: kubernetes
      context: mlpipeline-presubmit-e2e-test
      always_run: true
      skip_report: false
      rerun_command: /test mlpipeline-presubmit-e2e-test
      trigger: (?m)^/test (all|mlpipeline-presubmit-e2e-test),?(\s+|$)
      labels:
        preset-service-account: "true"
      spec:
        containers:
        - image: gcr.io/ml-pipeline/test-worker:v20180711-cb64c3d-e3b0c4
          args:
          - --clean
          - --repo=github.com/googleprivate/$(REPO_NAME)=$(PULL_REFS)
          - --service-account=/etc/service-account/service-account.json
          - --upload=gs://gke-prow/pr-logs
          - --ssh=/etc/ssh-knative/ssh-knative
          - --scenario=execute
          - -- # end bootstrap args, scenario args below
          - -- # end kubernetes_execute_bazel flags (consider following flags as text)
          - ./test/presubmit-tests.sh
          - "--workflow_file"
          - "e2e_test_gke.yaml"
          - "--test_result_folder"
          - "e2e_test"
          volumeMounts:
          - mountPath: /etc/ssh-knative
            name: ssh-knative
        volumes:
        - name: ssh-knative
          secret:
            defaultMode: 0400
            secretName: ssh-knative
    - name: mlpipeline-presubmit-e2e-test-gce-minikube
      agent: kubernetes
      context: mlpipeline-presubmit-e2e-test-gce-minikube
      always_run: true
      skip_report: true
      rerun_command: /test mlpipeline-presubmit-e2e-test-gce-minikube
      trigger: (?m)^/test (all|mlpipeline-presubmit-e2e-test-gce-minikube),?(\s+|$)
      labels:
        preset-service-account: "true"
      spec:
        containers:
        - image: gcr.io/ml-pipeline/test-worker:v20180711-cb64c3d-e3b0c4
          args:
          - --clean
          - --repo=github.com/googleprivate/$(REPO_NAME)=$(PULL_REFS)
          - --service-account=/etc/service-account/service-account.json
          - --upload=gs://gke-prow/pr-logs
          - --ssh=/etc/ssh-knative/ssh-knative
          - --scenario=execute
          - -- # end bootstrap args, scenario args below
          - -- # end kubernetes_execute_bazel flags (consider following flags as text)
          - ./test/presubmit-tests-gce-minikube.sh
          - "--workflow_file"
          - "e2e_test_gke.yaml"
          - "--test_result_folder"
          - "e2e_test"
          volumeMounts:
          - mountPath: /etc/ssh-knative
            name: ssh-knative
        volumes:
        - name: ssh-knative
          secret:
            defaultMode: 0400
            secretName: ssh-knative
  - name: mlpipeline-presubmit-unit-test
    agent: kubernetes
    context: mlpipeline-presubmit-unit-test
    always_run: true
    skip_report: false
    rerun_command: /test mlpipeline-presubmit-unit-test
    trigger: (?m)^/test (all|mlpipeline-presubmit-unit-test),?(\s+|$)
    labels:
      preset-service-account: "true"
    spec:
      containers:
      - image: gcr.io/ml-pipeline/test-worker:v20180711-cb64c3d-e3b0c4
        args:
        - --clean
        - --repo=github.com/googleprivate/$(REPO_NAME)=$(PULL_REFS)
        - --service-account=/etc/service-account/service-account.json
        - --upload=gs://gke-prow/pr-logs
        - --ssh=/etc/ssh-knative/ssh-knative
        - --scenario=execute
        - -- # end bootstrap args, scenario args below
        - -- # end kubernetes_execute_bazel flags (consider following flags as text)
        - ./test/presubmit-tests.sh
        - "--workflow_file"
        - "unit_test_gke.yaml"
        - "--test_result_folder"
        - "backend_unit_test"
        volumeMounts:
        - mountPath: /etc/ssh-knative
          name: ssh-knative
      volumes:
      - name: ssh-knative
        secret:
          defaultMode: 0400
          secretName: ssh-knative

periodics:
- interval: 1h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-ci-master
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=70
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-canary/latest
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=50m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 2h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-ci-serial-master
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=320
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-canary/latest
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=300m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 2h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-ci-slow-master
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=170
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-canary/latest
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=150m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 2h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-ci-device-plugin-gpu-master
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=170
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-canary/latest
      - --gcp-project-type=gpu-project
      - --gcp-zone=us-west1-b
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Feature:GPUDevicePlugin\] --minStartupPods=8
      - --timeout=150m
      - --env=NODE_ACCELERATORS=type=nvidia-tesla-k80,count=2
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 30m
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-m65
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=70
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-65/latest-1.8
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=50m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 30m
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-m66
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=70
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-66/latest-1.9
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=50m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 30m
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-m67
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=70
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-67
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=50m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 30m
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-m68
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=70
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-68
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=50m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 30m
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-m69
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=70
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-69
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=50m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 30m
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-m70
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=70
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-70
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=50m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 30m
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-master
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=70
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-canary
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=50m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 1h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-serial-m65
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=320
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-65/latest-1.8
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=300m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 1h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-serial-m66
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=320
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-66/latest-1.9
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=300m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 1h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-serial-m67
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=320
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-67
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=300m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 1h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-serial-m68
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=320
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-68
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=300m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 1h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-serial-m69
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=320
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-69
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=300m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 1h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-serial-m70
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=320
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-70
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=300m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 1h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-serial-master
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=320
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-canary
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=300m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 2h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-slow-m65
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=170
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-65/latest-1.8
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=150m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 2h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-slow-m66
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=170
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-66/latest-1.9
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=150m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 2h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-slow-m67
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=170
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-67
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=150m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 2h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-slow-m68
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=170
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-68
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=150m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 2h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-slow-m69
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=170
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-69
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=150m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 2h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-slow-m70
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=170
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-70
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=150m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 2h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-qa-slow-master
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=170
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-canary
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=150m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

# COS Docker validation tests.
- interval: 1h
  agent: kubernetes
  name: ci-kubernetes-e2e-cos-docker-validation
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=70
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-next-canary
      - --gcp-master-image=gci
      - --gcp-node-image=gci
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=50m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 1h
  agent: kubernetes
  name: ci-kubernetes-e2e-cos-docker-validation-serial
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=320
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-next-canary
      - --gcp-master-image=gci
      - --gcp-node-image=gci
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=300m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 1h
  agent: kubernetes
  name: ci-kubernetes-e2e-cos-docker-validation-slow
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=170
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-next-canary
      - --gcp-master-image=gci
      - --gcp-node-image=gci
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=150m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 24h
  agent: kubernetes
  name: ci-kubernetes-soak-cos-docker-validation
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=1220
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --down=false
      - --env=DOCKER_TEST_LOG_LEVEL=--log-level=warn
      - --extract=gci/gci-next-canary
      - --gcp-master-image=gci
      - --gcp-node-image=gci
      - --gcp-project-type=gci-qa-project
      - --gcp-zone=us-central1-f
      - --provider=gce
      - --save=gs://gke-prow/soak/ci-kubernetes-soak-cos-docker-validation
      - --soak
      - --test_args=--ginkgo.skip=\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --clean-start=true --minStartupPods=8
      - --timeout=1200m
      - --up=false
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- interval: 6h
  agent: kubernetes
  name: ci-gke-guitar-projects-janitor
  labels:
    preset-service-account: "true"
  spec:
    containers:
    - args:
      - --timeout=150
      - --bare
      - --scenario=kubernetes_janitor
      - --upload=gs://gke-prow/logs
      - --
      - --mode=custom
      # TODO(senlu): figure out a way to sync the project list
      - |-
        --projects=cloud-kubernetes-test-guitar,
                  cloud-kubernetes-test-guitar-1,
                  cloud-kubernetes-test-guitar-2,
                  cloud-kubernetes-test-guitar-3,
                  cloud-kubernetes-test-guitar-4,
                  cloud-kubernetes-test-guitar-5,
                  cloud-kubernetes-test-guitar-6,
                  cloud-kubernetes-test-guitar-7,
                  cloud-kubernetes-test-guitar-8,
                  cloud-kubernetes-test-guitar-9,
                  cloud-kubernetes-guitar-10,
                  cloud-kubernetes-guitar-11,
                  cloud-kubernetes-guitar-12,
                  cloud-kubernetes-guitar-13,
                  cloud-kubernetes-guitar-14,
                  cloud-kubernetes-guitar-15,
                  cloud-kubernetes-guitar-16,
                  cloud-kubernetes-guitar-17,
                  cloud-kubernetes-guitar-18,
                  cloud-kubernetes-guitar-19,
                  cloud-kubernetes-guitar-20,
                  cloud-kubernetes-guitar-21,
                  cloud-kubernetes-guitar-22,
                  cloud-kubernetes-guitar-23,
                  cloud-kubernetes-guitar-24,
                  cloud-kubernetes-guitar-25,
                  cloud-kubernetes-guitar-26,
                  cloud-kubernetes-guitar-27,
                  cloud-kubernetes-guitar-28,
                  cloud-kubernetes-guitar-29,
                  cloud-kubernetes-ingress-e2e-0,
                  cloud-k8s-guitar-xpn-host,
                  cloud-k8s-guitar-xpn-svc-1,
                  cloud-k8s-guitar-xpn-svc-2,
                  gke-e2e-binauthz-prod,
                  gke-e2e-binauthz-test,
                  gke-e2e-createdelete,
                  gke-e2e-guitar-accelerators-1,
                  gke-e2e-guitar-accelerators-2,
                  gke-e2e-guitar-accelerators-3,
                  gke-e2e-guitar-accelerators-4,
                  gke-e2e-guitar-accelerators-5,
                  gke-e2e-jenkins-oneoff,
                  gke-e2e-pull-config,
                  gke-e2e-regional-createdelete,
                  gke-gcestaging-e2e
      - --age=24 # 1 day for guitar projects
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master

- name: ci-runsc-build
  interval: 30m
  agent: kubernetes
  labels:
    preset-service-account: "true"
  spec:
    containers:
    - image: gcr.io/k8s-testimages/kubekins-e2e:v20180829-29e661965-experimental
      args:
      - --repo=github.com/google/gvisor=master
      - --repo=github.com/Random-Liu/runsc-scripts=master
      - --root=/go/src
      - --upload=gs://gke-prow/logs
      - --scenario=execute
      - --
      - /go/src/github.com/Random-Liu/runsc-scripts/build.sh

- interval: 1h
  agent: kubernetes
  name: ci-containerd-runsc-node-e2e
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
      args:
      - --repo=k8s.io/kubernetes
      - --repo=github.com/containerd/cri=master
      - --repo=github.com/Random-Liu/runsc-scripts=master
      - --root=/go/src
      - --upload=gs://gke-prow/logs
      - --scenario=kubernetes_e2e
      - --timeout=90
      - --
      - --node-args=--image-config-file=/go/src/github.com/Random-Liu/runsc-scripts/image-config.yaml
      - --deployment=node
      - --gcp-project=cri-containerd-node-e2e
      - --gcp-zone=us-central1-f
      - '--node-test-args=--container-runtime=remote --container-runtime-endpoint=unix:///run/containerd/containerd.sock --container-runtime-process-name=/home/containerd/usr/local/bin/containerd --container-runtime-pid-file= --kubelet-flags="--cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/containerd.service" --extra-log="{\"name\": \"containerd.log\", \"journalctl\": [\"-u\", \"containerd\"]}"'
      - --node-tests=true
      - --provider=gce
      - '--test_args=--nodes=8 --focus="\[NodeConformance\]|\[NodeFeature:FSGroup\]|\[NodeFeature:\sImageID\]" --skip="\[Flaky\]|\[Serial\]" --flakeAttempts=2'
      - --timeout=65m

- interval: 1h
  agent: kubernetes
  name: ci-containerd-runsc-node-e2e-multicontainer
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
      args:
      - --repo=k8s.io/kubernetes
      - --repo=github.com/containerd/cri=master
      - --repo=github.com/Random-Liu/runsc-scripts=master
      - --root=/go/src
      - --upload=gs://gke-prow/logs
      - --scenario=kubernetes_e2e
      - --timeout=90
      - --
      - --node-args=--image-config-file=/go/src/github.com/Random-Liu/runsc-scripts/image-config-mc.yaml
      - --deployment=node
      - --gcp-project=cri-containerd-node-e2e
      - --gcp-zone=us-central1-f
      - '--node-test-args=--container-runtime=remote --container-runtime-endpoint=unix:///run/containerd/containerd.sock --container-runtime-process-name=/home/containerd/usr/local/bin/containerd --container-runtime-pid-file= --kubelet-flags="--cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/containerd.service" --extra-log="{\"name\": \"containerd.log\", \"journalctl\": [\"-u\", \"containerd\"]}"'
      - --node-tests=true
      - --provider=gce
      - '--test_args=--nodes=8 --focus="\[NodeConformance\]|\[NodeFeature:FSGroup\]|\[NodeFeature:\sImageID\]" --skip="\[Flaky\]|\[Serial\]" --flakeAttempts=2'
      - --timeout=65m

- interval: 1h
  agent: kubernetes
  name: ci-containerd-runsc-e2e
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
      args:
      - --repo=github.com/containerd/cri=master
      - --repo=github.com/Random-Liu/runsc-scripts=master
      - --upload=gs://gke-prow/logs
      - --scenario=kubernetes_e2e
      - --timeout=70
      - --
      - --check-leaked-resources
      - --env=KUBE_MASTER_EXTRA_METADATA=user-data=/workspace/github.com/containerd/cri/test/e2e/master.yaml,containerd-configure-sh=/workspace/github.com/containerd/cri/cluster/gce/configure.sh,containerd-extra-init-sh=/workspace/github.com/Random-Liu/runsc-scripts/runsc-e2e-init.sh,containerd-env=/workspace/github.com/Random-Liu/runsc-scripts/env
      - --env=KUBE_NODE_EXTRA_METADATA=user-data=/workspace/github.com/containerd/cri/test/e2e/node.yaml,containerd-configure-sh=/workspace/github.com/containerd/cri/cluster/gce/configure.sh,containerd-extra-init-sh=/workspace/github.com/Random-Liu/runsc-scripts/runsc-e2e-init.sh,containerd-env=/workspace/github.com/Random-Liu/runsc-scripts/env
      - --env=STORAGE_BACKEND=etcd2
      - --env=TEST_ETCD_IMAGE=2.2.1
      - --env=TEST_ETCD_VERSION=2.2.1
      - --env=ENABLE_POD_SECURITY_POLICY=true
      - --env=LOG_DUMP_SYSTEMD_SERVICES=containerd containerd-installation
      - --env=KUBE_CONTAINER_RUNTIME=remote
      - --env=KUBE_CONTAINER_RUNTIME_ENDPOINT=unix:///run/containerd/containerd.sock
      - --env=KUBE_CONTAINER_RUNTIME_NAME=containerd
      - --env=KUBE_LOAD_IMAGE_COMMAND=/home/containerd/usr/local/bin/ctr cri load
      - --env=NETWORK_PROVIDER=
      - --env=NON_MASQUERADE_CIDR=0.0.0.0/0
      - --env=KUBELET_TEST_ARGS=--runtime-cgroups=/system.slice/containerd.service
      - --extract=ci/latest
      - --gcp-project=cri-containerd-node-e2e
      - --gcp-node-image=gci
      - --gcp-nodes=4
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=30
      - --provider=gce
      - --test_args=--ginkgo.focus=Conformance --minStartupPods=8",
      - --timeout=50m

- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable2-autoscaling
  spec:
    containers:
    - args:
      - --bare
      - --timeout=620
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-e5ed94926c
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable2
      - --timeout=600m
      - --test_args=--ginkgo.focus=\[Feature:ClusterSizeAutoscalingScaleUp\]|\[Feature:ClusterSizeAutoscalingScaleDown\] --ginkgo.skip=\[Flaky\] --minStartupPods=8
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable2-serial
  spec:
    containers:
    - args:
      - --bare
      - --timeout=520
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-002b9d4651
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable2
      - --timeout=500m
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=1
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 2h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2enode-ubuntu1-k8sstable3-serial
  spec:
    containers:
    - args:
      - --timeout=200
      - --repo=k8s.io/kubernetes=release-1.8
      - --root=/go/src
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --deployment=node
      - --node-tests=true
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-1
      - --image-project=ubuntu-os-gke-cloud-private
      - --timeout=180m
      - --test_args=--nodes=1 --focus="\[Serial\]" --skip="\[Flaky\]|\[Benchmark\]|\[NodeAlphaFeature:.+\]"
      - --node-test-args=--feature-gates=DynamicKubeletConfig=true
      env:
      - name: GOPATH
        value: /go
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-1.8
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gce-ubuntu2-k8sstable2-default
  spec:
    containers:
    - args:
      - --bare
      - --timeout=70
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-532dba062e
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable2
      - --timeout=50m
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=30
      - --check-leaked-resources=false
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 2h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2enode-ubuntu1-k8sstable3-gkespec
  spec:
    containers:
    - args:
      - --timeout=80
      - --repo=k8s.io/kubernetes=release-1.8
      - --root=/go/src
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --deployment=node
      - --node-tests=true
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-1
      - --image-project=ubuntu-os-gke-cloud-private
      - --timeout=60m
      - --test_args=--nodes=8 --skip="\[Flaky\]|\[Serial\]|\[NodeAlphaFeature:.+\]"
      - --node-args=--system-spec-name=gke
      env:
      - name: GOPATH
        value: /go
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-1.8
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gce-ubuntu1-k8sstable3-serial
  spec:
    containers:
    - args:
      - --bare
      - --timeout=520
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-0d4c6b9a5b
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-1
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable3
      - --timeout=500m
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=1
      - --check-leaked-resources=false
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu1-k8sstable3-alphafeatures
  spec:
    containers:
    - args:
      - --bare
      - --timeout=200
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-6e25ff2f6a
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-1
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable3
      - --timeout=180m
      - --test_args=--ginkgo.focus=\[Feature:(ExternalTrafficLocalOnly|DynamicKubeletConfig)\] --minStartupPods=8
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu1-k8sstable3-reboot
  spec:
    containers:
    - args:
      - --bare
      - --timeout=200
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-252b67e583
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-1
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable3
      - --timeout=180m
      - --test_args=--ginkgo.focus=\[Feature:Reboot\] --minStartupPods=8
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 2h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2enode-ubuntu2-k8sstable1-serial
  spec:
    containers:
    - args:
      - --timeout=200
      - --repo=k8s.io/kubernetes=release-1.10
      - --root=/go/src
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --deployment=node
      - --node-tests=true
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --timeout=180m
      - --test_args=--nodes=1 --focus="\[Serial\]" --skip="\[Flaky\]|\[Benchmark\]|\[NodeAlphaFeature:.+\]"
      - --node-test-args=--feature-gates=DynamicKubeletConfig=true
      env:
      - name: GOPATH
        value: /go
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-1.10
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 4h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable1-slow
  spec:
    containers:
    - args:
      - --bare
      - --timeout=170
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-a717ba9eee
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable1
      - --timeout=150m
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=30
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 4h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable1-flaky
  spec:
    containers:
    - args:
      - --bare
      - --timeout=320
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-570ce12160
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable1
      - --timeout=300m
      - --test_args=--ginkgo.focus=\[Flaky\] --ginkgo.skip=\[Feature:.+\] --minStartupPods=8
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 4h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable1-updown
  spec:
    containers:
    - args:
      - --bare
      - --timeout=50
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-eeb4bfd8c3
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable1
      - --timeout=30m
      - --test_args=--ginkgo.focus=\[k8s.io\]\sNetworking.*\[Conformance\] --minStartupPods=8
      - --ginkgo-parallel
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gce-ubuntu1-k8sstable3-default
  spec:
    containers:
    - args:
      - --bare
      - --timeout=70
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-665fca7985
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-1
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable3
      - --timeout=50m
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=30
      - --check-leaked-resources=false
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 4h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gce-ubuntu2-k8sstable1-slow
  spec:
    containers:
    - args:
      - --bare
      - --timeout=170
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-eca67f767b
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable1
      - --timeout=150m
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=30
      - --check-leaked-resources=false
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 4h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable1-serial
  spec:
    containers:
    - args:
      - --bare
      - --timeout=520
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-bd4d093510
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable1
      - --timeout=500m
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=1
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 4h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable1-autoscaling
  spec:
    containers:
    - args:
      - --bare
      - --timeout=620
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-8bcaeb558b
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable1
      - --timeout=600m
      - --test_args=--ginkgo.focus=\[Feature:ClusterSizeAutoscalingScaleUp\]|\[Feature:ClusterSizeAutoscalingScaleDown\] --ginkgo.skip=\[Flaky\] --minStartupPods=8
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 4h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gce-ubuntu2-k8sstable1-serial
  spec:
    containers:
    - args:
      - --bare
      - --timeout=520
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-f49fb1d994
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable1
      - --timeout=500m
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=1
      - --check-leaked-resources=false
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable2-flaky
  spec:
    containers:
    - args:
      - --bare
      - --timeout=320
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-8833c69286
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable2
      - --timeout=300m
      - --test_args=--ginkgo.focus=\[Flaky\] --ginkgo.skip=\[Feature:.+\] --minStartupPods=8
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable2-slow
  spec:
    containers:
    - args:
      - --bare
      - --timeout=170
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-799d9a0958
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable2
      - --timeout=150m
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=30
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gce-ubuntu1-k8sstable3-slow
  spec:
    containers:
    - args:
      - --bare
      - --timeout=170
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-72f5019039
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-1
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable3
      - --timeout=150m
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=30
      - --check-leaked-resources=false
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable2-updown
  spec:
    containers:
    - args:
      - --bare
      - --timeout=50
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-745fda5dae
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable2
      - --timeout=30m
      - --test_args=--ginkgo.focus=\[k8s.io\]\sNetworking.*\[Conformance\] --minStartupPods=8
      - --ginkgo-parallel
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 2h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2enode-ubuntu2-k8sstable2-serial
  spec:
    containers:
    - args:
      - --timeout=200
      - --repo=k8s.io/kubernetes=release-1.9
      - --root=/go/src
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --deployment=node
      - --node-tests=true
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --timeout=180m
      - --test_args=--nodes=1 --focus="\[Serial\]" --skip="\[Flaky\]|\[Benchmark\]|\[NodeAlphaFeature:.+\]"
      - --node-test-args=--feature-gates=DynamicKubeletConfig=true
      env:
      - name: GOPATH
        value: /go
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-1.9
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu1-k8sstable3-serial
  spec:
    containers:
    - args:
      - --bare
      - --timeout=520
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-cb966978b8
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-1
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable3
      - --timeout=500m
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=1
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu1-k8sstable3-updown
  spec:
    containers:
    - args:
      - --bare
      - --timeout=50
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-04b6b9e7ce
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-1
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable3
      - --timeout=30m
      - --test_args=--ginkgo.focus=\[k8s.io\]\sNetworking.*\[Conformance\] --minStartupPods=8
      - --ginkgo-parallel
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 2h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2enode-ubuntu2-k8sstable1-gkespec
  spec:
    containers:
    - args:
      - --timeout=80
      - --repo=k8s.io/kubernetes=release-1.10
      - --root=/go/src
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --deployment=node
      - --node-tests=true
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --timeout=60m
      - --test_args=--nodes=8 --skip="\[Flaky\]|\[Serial\]|\[NodeAlphaFeature:.+\]"
      - --node-args=--system-spec-name=gke
      env:
      - name: GOPATH
        value: /go
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-1.10
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable2-alphafeatures
  spec:
    containers:
    - args:
      - --bare
      - --timeout=200
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-3bb12e8ace
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable2
      - --timeout=180m
      - --test_args=--ginkgo.focus=\[Feature:(ExternalTrafficLocalOnly|DynamicKubeletConfig)\] --minStartupPods=8
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu1-k8sstable3-slow
  spec:
    containers:
    - args:
      - --bare
      - --timeout=170
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-1be8857228
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-1
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable3
      - --timeout=150m
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=30
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 4h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable1-alphafeatures
  spec:
    containers:
    - args:
      - --bare
      - --timeout=200
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-9f571eac2b
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable1
      - --timeout=180m
      - --test_args=--ginkgo.focus=\[Feature:(ExternalTrafficLocalOnly|DynamicKubeletConfig)\] --minStartupPods=8
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 4h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gce-ubuntu2-k8sstable1-default
  spec:
    containers:
    - args:
      - --bare
      - --timeout=70
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-6827b2df7c
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable1
      - --timeout=50m
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=30
      - --check-leaked-resources=false
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 2h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2enode-ubuntu2-k8sstable2-gkespec
  spec:
    containers:
    - args:
      - --timeout=80
      - --repo=k8s.io/kubernetes=release-1.9
      - --root=/go/src
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --deployment=node
      - --node-tests=true
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --timeout=60m
      - --test_args=--nodes=8 --skip="\[Flaky\]|\[Serial\]|\[NodeAlphaFeature:.+\]"
      - --node-args=--system-spec-name=gke
      env:
      - name: GOPATH
        value: /go
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-1.9
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gce-ubuntu2-k8sstable2-slow
  spec:
    containers:
    - args:
      - --bare
      - --timeout=170
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-bf27c33c25
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable2
      - --timeout=150m
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=30
      - --check-leaked-resources=false
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu1-k8sstable3-flaky
  spec:
    containers:
    - args:
      - --bare
      - --timeout=320
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-5bc2e85fd7
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-1
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable3
      - --timeout=300m
      - --test_args=--ginkgo.focus=\[Flaky\] --ginkgo.skip=\[Feature:.+\] --minStartupPods=8
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 4h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable1-default
  spec:
    containers:
    - args:
      - --bare
      - --timeout=70
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-8de59d074a
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable1
      - --timeout=50m
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=30
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gce-ubuntu2-k8sstable2-serial
  spec:
    containers:
    - args:
      - --bare
      - --timeout=520
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-79194b4fe0
      - --provider=gce
      - --gcp-zone=us-central1-f
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable2
      - --timeout=500m
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=1
      - --check-leaked-resources=false
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable2-reboot
  spec:
    containers:
    - args:
      - --bare
      - --timeout=200
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-d761cb54b9
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable2
      - --timeout=180m
      - --test_args=--ginkgo.focus=\[Feature:Reboot\] --minStartupPods=8
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu1-k8sstable3-autoscaling
  spec:
    containers:
    - args:
      - --bare
      - --timeout=620
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-68738dc26b
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-1
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable3
      - --timeout=600m
      - --test_args=--ginkgo.focus=\[Feature:ClusterSizeAutoscalingScaleUp\]|\[Feature:ClusterSizeAutoscalingScaleDown\] --ginkgo.skip=\[Flaky\] --minStartupPods=8
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable2-default
  spec:
    containers:
    - args:
      - --bare
      - --timeout=70
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-84ad4b1a52
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable2
      - --timeout=50m
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=30
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 6h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu1-k8sstable3-default
  spec:
    containers:
    - args:
      - --bare
      - --timeout=70
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-90a3bf5e82
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-1
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable3
      - --timeout=50m
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --ginkgo-parallel=30
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- tags:
  - generated   # AUTO-GENERATED by experiment/generate_tests.py - DO NOT EDIT!
  interval: 4h
  agent: kubernetes
  labels:
    preset-service-account: 'true'
    preset-k8s-ssh: 'true'
  name: ci-kubernetes-e2e-gke-ubuntu2-k8sstable1-reboot
  spec:
    containers:
    - args:
      - --bare
      - --timeout=200
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --cluster=test-8761d71efc
      - --check-leaked-resources
      - --provider=gke
      - --deployment=gke
      - --gcp-zone=us-central1-f
      - --gcp-cloud-sdk=gs://cloud-sdk-testing/ci/staging
      - --gke-environment=test
      - --image-family=ubuntu-gke-1604-lts-2
      - --image-project=ubuntu-os-gke-cloud-private
      - --gcp-node-image=custom
      - --extract=ci/k8s-stable1
      - --timeout=180m
      - --test_args=--ginkgo.focus=\[Feature:Reboot\] --minStartupPods=8
      env:
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
# shielded vm testing suites
- interval: 2h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-shieldedvm
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=70
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-shielded
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.skip=\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=50m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- interval: 2h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-serial-shieldedvm
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=320
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-shielded
      - --gcp-zone=us-central1-f
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Serial\]|\[Disruptive\] --ginkgo.skip=\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=300m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
- interval: 2h
  agent: kubernetes
  name: ci-kubernetes-e2e-gce-gci-slow-sheildedvm
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  spec:
    containers:
    - args:
      - --timeout=170
      - --bare
      - --scenario=kubernetes_e2e
      - --upload=gs://gke-prow/logs
      - --
      - --check-leaked-resources
      - --extract=gci/gci-shielded
      - --gcp-zone=us-central1-f
      - --ginkgo-parallel=25
      - --provider=gce
      - --test_args=--ginkgo.focus=\[Slow\] --ginkgo.skip=\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\] --minStartupPods=8
      - --timeout=150m
      image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master


postsubmits:
  GoogleCloudPlatform/k8s-tpu-operator:
  - name: k8s-tpu-operator-image-push
    agent: kubernetes
    branches:
    - master
    - release-0.0
    labels:
      preset-service-account: "true"
      preset-k8s-ssh: "true"
    spec:
      containers:
      - image: gcr.io/k8s-testimages/kubekins-e2e:v20180730-8b7ab3104-master
        args:
        - --clean
        - --repo=github.com/GoogleCloudPlatform/$(REPO_NAME)=$(PULL_REFS)
        - --service-account=/etc/service-account/service-account.json
        - --upload=gs://gke-prow/logs
        - --ssh=/etc/tpu-ssh/ssh-knative
        - --scenario=execute
        - -- # end bootstrap args, scenario args below
        - make
        - push
        env:
        - name: DOCKER_IN_DOCKER_ENABLED
          value: "true"
        # docker-in-docker needs privileged mode
        securityContext:
          privileged: true
        volumeMounts:
        - mountPath: /etc/tpu-ssh
          name: tpu-ssh
        - mountPath: /docker-graph
          name: docker-graph
      volumes:
      - name: tpu-ssh
        secret:
          defaultMode: 0400
          secretName: ssh-knative
      - name: docker-graph
        emptyDir: {}
